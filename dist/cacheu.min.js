!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cacheu=t():e.Cacheu=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.r(t),e.d(t,{default:()=>a});let r=function(){function e(t={}){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!0!==(null==t?void 0:t.persistMode)||localStorage||(t.persistMode=!1),e.config={...e.config,...t},e.config.persistMode)try{const t=localStorage.getItem(e.PERSIST_KEY);if(t){const o=JSON.parse(t);e.data={...o},e.persistData={...o},e.cleanup()}}catch(e){console.error(e)}setInterval(e.cleanup,1e3*e.config.cleanup)}var t,r;return t=e,r=[{key:"create",value:function(t){return new e(t)}},{key:"set",value:function(t,o,r=this.config.ttl,a=!1){const n={expire:0===r?0:Date.now()+1e3*r,value:o};if(this.data[t]=n,a)try{this.persistData[t]=n,localStorage.setItem(e.PERSIST_KEY,JSON.stringify(this.persistData))}catch(e){console.error(e)}}},{key:"get",value:function(e,t=null){return this.has(e)?this.data[e].value:t}},{key:"has",value:function(e){const t=this.data[e];return!(!t||this.isExpired(t.expire))}},{key:"remove",value:function(t){var o;if(delete this.data[t],null!==(o=this.persistData)&&void 0!==o&&o[t])try{if(delete this.persistData[t],0===Object.keys(this.persistData).length)return void localStorage.removeItem(e.PERSIST_KEY);localStorage.setItem(e.PERSIST_KEY,JSON.stringify(this.persistData))}catch(e){console.error(e)}}},{key:"removeAll",value:function(){this.data={},this.persistData={},localStorage.removeItem(this.PERSIST_KEY)}},{key:"isExpired",value:function(e){return 0!==e&&e<Date.now()}},{key:"cleanup",value:function(){for(const[t,o]of Object.entries(e.data))e.isExpired(o.expire)&&e.remove(t)}}],null&&o(t.prototype,null),r&&o(t,r),e}();r.PERSIST_KEY="CACHEU_DATA",r.config={ttl:600,cleanup:3600,persistMode:!1},r.data={},r.persistData={};const a=r;return t})()}));